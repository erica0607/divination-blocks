<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>åšä¸å‡ºæ±ºå®š?æ“²ç­Šä¾†å¹«ä½ ğŸ˜†</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
      margin: 0;
      transition: background 0.5s, color 0.5s;
    }

    body.daytime {
      background-color: #fffdf5;
      color: #222222;
    }

    body.nighttime {
      background-color: #10345a;
      color: #eee;
      .extra{
        color: #eee;
      }
    }

    .cup {
      font-size: 80px;
      margin: 20px;
      display: inline-block;
      transition: transform 0.3s;
    }
    .shaking {
      animation: shake 0.6s ease-in-out;
    }
    @keyframes shake {
      0%   { transform: rotate(0deg); }
      25%  { transform: rotate(20deg); }
      50%  { transform: rotate(-20deg); }
      75%  { transform: rotate(10deg); }
      100% { transform: rotate(0deg); }
    }

    button {
      padding: 10px 20px;
      font-size: 20px;
      background-color: #e64a19;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    .result {
      font-size: 30px;
      margin-top: 30px;
      font-weight: bold;
    }

    .extra {
      font-size: 18px;
      color: #555;
      margin-top: 5px;
    }

    .stats {
      margin: 5% 40% ;
      padding: 4px;
      font-size: 16px;
      color: #444;
      background-color: rgb(255, 231, 199);
    }

    #toggleThemeBtn {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 10px 16px;
      background-color: #444;
      color: white;
      border-radius: 20px;
      font-size: 16px;
      z-index: 1001;
      cursor: pointer;
    }

    #stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: -1;
      pointer-events: none;
      filter: blur(1px);
    }

  </style>
</head>
<body>

  <button id="toggleThemeBtn">ğŸŒ™ åˆ‡æ›ä¸»é¡Œ</button>

  <canvas id="stars"></canvas>

  <h1>åšä¸å‡ºæ±ºå®š?æ“²ç­Šä¾†å¹«ä½ ğŸ˜†</h1>

  <div class="cup-area">
    <span id="cup1" class="cup"><img src="./img/cap_left-front.png" /></span>
    <span id="cup2" class="cup"><img src="./img/cap_right-front.png" /></span>
  </div>

  <button onclick="throwCups()">æ“²ç­Šï¼</button>

  <div class="result" id="resultText">é»ä¸€ä¸‹ä¸Šé¢çš„æŒ‰éˆ•ä¾†æ“²ç­Š</div>
  <div class="extra"id="extraMessage"></div>

  <div class="stats" id="statsText">
    è–ç­Šï¼š0 æ¬¡ï½œç¬‘ç­Šï¼š0 æ¬¡ï½œé™°ç­Šï¼š0 æ¬¡
  </div>

  <script>
    let stats = {
      è–ç­Š: 0,
      ç¬‘ç­Š: 0,
      é™°ç­Š: 0
    };

    function throwCups() {
      const cup1El = document.getElementById('cup1');
      const cup2El = document.getElementById('cup2');
      const resultEl = document.getElementById('resultText');
      const extraEl = document.getElementById('extraMessage');
      const statsEl = document.getElementById('statsText');


      // åŠ å…¥å‹•ç•« class
      cup1El.classList.add('shaking');
      cup2El.classList.add('shaking');
      resultEl.textContent = 'æ“²ç­Šä¸­...';
      extraEl.textContent = '';

      // é 600ms å†é¡¯ç¤ºçµæœ
      setTimeout(() => {
        cup1El.classList.remove('shaking');
        cup2El.classList.remove('shaking');

        const sides = ['æ­£é¢', 'èƒŒé¢'];
        const cup1 = sides[Math.floor(Math.random() * 2)];
        const cup2 = sides[Math.floor(Math.random() * 2)];

        // æ›´æ›åœ–ç‰‡
        cup1El.querySelector('img').src = cup1 === 'æ­£é¢' ? './img/cap_left-front.png' : './img/cap_left-back.png';
        cup2El.querySelector('img').src = cup2 === 'æ­£é¢' ? './img/cap_right-front.png' : './img/cap_right-back.png';

        // åˆ¤æ–·çµæœ
        let result = '';
        let extraMessage = '';

        if ((cup1 === 'æ­£é¢' && cup2 === 'èƒŒé¢') || (cup1 === 'èƒŒé¢' && cup2 === 'æ­£é¢')) {
          result = 'âœ… è–ç­Š';
          extraMessage = 'è‚¯å®šçš„ç­”æ¡ˆï¼Œè¡¨ç¤ºå¯è¡Œã€é †åˆ©';
          stats.è–ç­Š++;
        } else if (cup1 === 'æ­£é¢' && cup2 === 'æ­£é¢') {
          result = 'âŒ é™°ç­Š';
          extraMessage = ' ä¸å¯è¡Œï¼Œå»ºè­°é‡æ–°è€ƒæ…®æˆ–æ›å€‹æ–¹å¼';
          stats.é™°ç­Š++;
        } else {
          result = 'ğŸ˜† ç¬‘ç­Š';
          extraMessage = 'å•é¡Œä¸å¤ æ¸…æ¥šã€æ™‚æ©Ÿæœªåˆ°ï¼Œä½ çš„å•é¡Œä¸é©åˆå›ç­”';
          stats.ç¬‘ç­Š++;
        }

        resultEl.textContent = result;
        extraEl.textContent = extraMessage;

        statsEl.textContent = `è–ç­Šï¼š${stats.è–ç­Š} æ¬¡ï½œç¬‘ç­Šï¼š${stats.ç¬‘ç­Š} æ¬¡ï½œé™°ç­Šï¼š${stats.é™°ç­Š} æ¬¡`;
      }, 600); // å‹•ç•«çµæŸå¾ŒåŸ·è¡Œ
    }

 // ğŸŒ™ ä¸»é¡Œåˆ‡æ›é‚è¼¯
    let isNight = false;

    function setTheme(night) {
      const body = document.body;
      isNight = night;

      if (night) {
        body.classList.add('nighttime');
        body.classList.remove('daytime');
        document.getElementById('toggleThemeBtn').textContent = 'â˜€ï¸ åˆ‡æ›ä¸»é¡Œ';
        document.getElementById('stars').style.display = 'block';
      } else {
        body.classList.add('daytime');
        body.classList.remove('nighttime');
        document.getElementById('toggleThemeBtn').textContent = 'ğŸŒ™ åˆ‡æ›ä¸»é¡Œ';
        document.getElementById('stars').style.display = 'none';
      }
    }

    function setThemeByTime() {
      const hour = new Date().getHours();
      setTheme(hour >= 18 || hour < 6);
    }

    document.getElementById('toggleThemeBtn').addEventListener('click', () => {
      setTheme(!isNight);
    });

    setThemeByTime(); // åˆå§‹ä¸»é¡Œæ ¹æ“šæ™‚é–“è¨­å®š

    // âœ¨ æ˜Ÿæ˜Ÿå‹•ç•«
    const canvas = document.getElementById('stars');
    const ctx = canvas.getContext('2d');
    let stars = [];

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    for (let i = 0; i < 120; i++) {
      stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: Math.random() * 1.5 + 0.5,
        alpha: Math.random(),
        delta: Math.random() * 0.02 + 0.005
      });
    }

    function drawStars() {
      if (!isNight) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let s of stars) {
        s.alpha += s.delta;
        if (s.alpha <= 0 || s.alpha >= 1) s.delta = -s.delta;

        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r, 0, 2 * Math.PI);
        ctx.fillStyle = `rgba(255, 255, 255, ${s.alpha})`;
        ctx.shadowBlur = 4;
        ctx.shadowColor = 'white';
        ctx.fill();
      }
    }

    function animate() {
      requestAnimationFrame(animate);
      drawStars();
    }
    animate();
















  </script>

</body>
</html>
